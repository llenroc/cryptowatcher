@{
    ViewData["Title"] = "Home Page";
}

<h3>Poloniex dashboard</h3>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<div ng-app="MyApp" ng-controller="homeController">

    @*Loader*@
    <div ng-show="loaderVisibility" class="overlay"></div>
    <div ng-show="loaderVisibility" id="spinner"></div>

    <div class="row" style="margin-right:10px">
        <div class="col-md-1">
            <button type="button" class="btn btn-labeled btn-success btn-sm" ng-click="refreshData();">
                <span class="btn-label"><i class="glyphicon glyphicon-refresh"></i></span> Refresh
            </button>
        </div>

        <div ng-show="newCurrencyList.length > 0" class="ng-hide alert alert-warning
             col-md-11" role="alert" style="margin-bottom:0px; padding-top:5px !important;padding-bottom:5px !important" ng-cloak>
            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <strong>Info, new currency available! </strong>
            <span ng-repeat="item in newCurrencyList" ng-cloak>
                {{item.currencyName}};&nbsp;
            </span>
        </div>

    </div>
    <div class="mainDiv" style="display: none;">
        <br />
        <uib-tabset active="activeTab">
            <uib-tab index="0" ng-click="tabSelected(0)">
                <uib-tab-heading>
                    <img src="~/images/bitcoin.png" /> BTC
                </uib-tab-heading>
                <div ng-if="showGrid0" ui-grid="gridOptionsBTC" style="width:100%;height:500px;margin-top:12px"></div>
            </uib-tab>
            <uib-tab index="1" ng-click="tabSelected(1)">
                <uib-tab-heading>
                    <img src="~/images/eth.png" /> ETH
                </uib-tab-heading>
                <div ng-if="showGrid1" ui-grid="gridOptionsETH" style="width:100%;height:500px;margin-top:12px"></div>
            </uib-tab>
            <uib-tab index="2" ng-click="tabSelected(2)">
                <uib-tab-heading>
                    <img src="~/images/monero.png" /> MONERO
                </uib-tab-heading>
                <div ng-if="showGrid2" ui-grid="gridOptionsXMR" style="width:100%;height:500px;margin-top:12px"></div>
            </uib-tab>
            <uib-tab index="3" ng-click="tabSelected(3)">
                <uib-tab-heading>
                    <img src="~/images/usdt.png" /> USDT
                </uib-tab-heading>
                <div ng-if="showGrid3" ui-grid="gridOptionsUSD" style="width:100%;height:500px;margin-top:12px"></div>
            </uib-tab>
    
            <!-- DYNAMIC TABS-->
            <uib-tab ng-repeat="tab in currencyTabs" ng-click="tabSelected($index+4)" index="$index+4" >
                <uib-tab-heading>
                    <span class="glyphicon glyphicon-stats" style="padding:0px;margin:0px">  {{tab.name}}&nbsp;</span>
                    <button type="button" uib-tooltip="Close tab" class="close" data-dismiss="alert" aria-label="Close" ng-click="removeTab($index);" style="color: dimgray">
                        <span aria-hidden="true"  ng-class="{red: hover}" ng-mouseenter="hover = true" ng-mouseleave="hover = false">&times;</span>
                    </button>
                </uib-tab-heading>
                
                <currency-tab  name="{{tab.name}}"></currency-tab>
            </uib-tab>
        </uib-tabset>
    </div>
</div>

    @section Scripts {
        <script src="~/App/app.js" asp-append-version="true"></script>
        <script src="~/App/cryptoApiService.js" asp-append-version="true"></script>
        <script src="~/App/chartDirective.js" asp-append-version="true"></script>
        <script src="~/App/home/currencyTab.js" asp-append-version="true"></script>
        <script src="~/App/home/Index.js" asp-append-version="true"></script>
        <link href="~/css/loader.css" rel="stylesheet" />
        <script language="javascript">
            $(".overlay").show();
            var target = document.getElementById('spinner')
            var spinner = new Spinner(opts).spin(target);

            $(document).ready(function () {
	//llll
                $(".mainDiv").show();
            });
        </script>
    }
